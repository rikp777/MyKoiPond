sudo: required
language: java
jdk: oraclejdk11
services:
  - mysql
  - docker
env:
  global:
    - secure: "dXtPfv+lObX59Pp1xSE6RxiPXlU2qohjnEBgF/A2eG5CeWf1AYukdnN6HrBg+OFCnwQ9rYNQK0W8DYDYGuj6PQARxLagGzFAvg+9SlMOEmrsIf7DoAnElgXknB1k4vLI9mvEpWzOD/PulbBcIBmizoJSrmbHrgEVDI2l770ybHi5q6XMlpDe9tuM9WJx0mKUj/QzGGTzLqYI9d2UHZ8/k4HIYqGqd4a5FqBH+xBpLoKyso/bTuKHxCPS7r7rYGS+FjHueR1Mnbp++IGHaASLl4f1VVxglK4fhU8gHju2FRA0QHFVEW6rrizvdKnWyHgeeNJQKCtDRU838qAUjuENiNSpM9Wx+cNooVbd2X+wXAg8e1W96CybqUzcN+1WzFR5JOL6ZK8iZGHRGJGSga3RZ19P3qyzP+38dxGWbtGOHet+RxEJO5d9E8IJJk0nPB2HN67NRm7zxM9X0fKWldvsDqL+8AugUb4wnsdaE8YdqCj1zXpi+dmnxgrshTWVsCCzmGdGIy2nw8v02XfpKdZI1wYzPUW3fvL7m06HYch+CKYNIkElEpQW6rtnjT3BqlCmRkBmUmTkqY8WiQOuJ01hpK0bXL7fBGOwAd45crqj7LtSPNbULPcfaUCw7mRHhhdGnihRri+LtpUBpzMEJaHmdO4x3n5b2OQsxpK5s/Z/guU="
    - COMMIT=${TRAVIS_COMMIT::7}
addons:
  sonarcloud:
    organization: rikp777
    token:
      secure: $SONAR_TOKEN
script:
  - "./mvnw clean install -B"
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar
cache:
  directories:
    - "$HOME/.m2/repository"
    - "$HOME/.sonar/cache"
before_install:
  - chmod +x mvnw
  - mysql -e 'CREATE DATABASE IF NOT EXISTS test;'
